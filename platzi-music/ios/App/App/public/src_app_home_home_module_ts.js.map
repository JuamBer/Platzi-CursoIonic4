{"version":3,"file":"src_app_home_home_module_ts.js","mappings":"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","sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.ts","./src/app/services/api.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","import { Component } from '@angular/core';\nimport { ModalController, NavParams } from '@ionic/angular';\nimport { Artist } from 'src/modules/Artist';\nimport { AlbumModalPage } from '../album-modal/album-modal.page';\nimport { APIService } from '../services/api.service';\nimport { SongsModalPage } from '../songs-modal/songs-modal.page';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n  providers: [NavParams]\n})\nexport class HomePage {\n\n  slideOps: any = {\n    initialSlide: 2,\n    slidesPerView: 4,\n    speed:400\n  }\n  artists: any[] = [];\n  songs: any[] = [];\n  albums: any[] = [];\n\n  //Footer\n  song: any;\n  currentSong: HTMLAudioElement;\n  time: number;\n\n  constructor(\n    private musicService: APIService,\n    private modalController: ModalController\n  ) {}\n\n  ionViewDidEnter() {\n    this.musicService.getNewReleases().then(\n      (newRealeses)=>{\n        this.songs = newRealeses.albums.items.filter(e=>e.album_type==\"single\");\n        this.albums = newRealeses.albums.items.filter(e => e.album_type == \"album\");\n      }\n    )\n\n    this.musicService.getArtist().then(\n      (artists)=>{\n        this.artists = artists.items\n      }\n    )\n  }\n\n  async showArtist(artist) {\n    const songs = await this.musicService.getArtistTopTracks(artist.id);\n    const modal = await this.modalController.create({\n      component: SongsModalPage,\n      componentProps: {\n        songs: songs.tracks,\n        artist: artist.name\n      }\n    });\n\n    modal.onDidDismiss().then(dataReturned => {\n      this.song = dataReturned.data;\n      this.currentSong = new Audio(this.song.preview_url);\n    });\n\n    return await modal.present();\n  }\n\n  async showAlbum(album) {\n\n    const albumTracks = await this.musicService.getAlbumTracks(album.id);\n    console.log(album.name)\n    console.log(album.images[0].url)\n    console.log(albumTracks.items)\n    const modal = await this.modalController.create({\n      component: AlbumModalPage,\n      componentProps: {\n        albumName: album.name,\n        albumImg: album.images[0].url,\n        albumSongs: albumTracks.items\n      }\n    });\n\n    modal.onDidDismiss().then(dataReturned => {\n      this.song = dataReturned.data;\n      this.currentSong = new Audio(this.song.preview_url);\n    });\n\n    return await modal.present();\n  }\n  playSong(song){\n    this.song = song;\n    this.currentSong = new Audio(this.song.preview_url);\n  }\n  play(){\n    this.currentSong.play();\n    this.currentSong.addEventListener(\"timeupdate\", ()=>{\n      this.time = (this.currentSong.currentTime / this.currentSong.duration);\n    })\n    this.song.playing = true;\n  }\n\n  pause(){\n    this.currentSong.pause();\n    this.song.playing = false;\n  }\n\n  parseTime(time){\n    if (time){\n      return Math.floor(time).toString();\n    }else{\n      return '0:00'\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams, HttpErrorResponse, HttpStatusCode, HttpHeaders } from '@angular/common/http';\nimport { environment } from './../../environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class APIService {\n\n  private apiUrl: string = environment.API_URL;\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  getArtist() {\n    return fetch(`https://static.platzi.com/media/tmp/class-files/git/ionic/ionic-0b43f4f65e1026d2afe15307334d28bda0307cc3/src/app/services/artists.json`).then(\n      response => response.json()\n    );\n  }\n\n  getNewReleases() {\n    return fetch(`https://platzi-music-api.herokuapp.com/browse/new-releases`).then(\n      response => response.json()\n    );\n  }\n\n  getArtistTopTracks(artistId) {\n    return fetch(`https://platzi-music-api.herokuapp.com/artists/${artistId}/top-tracks?country=CO`).then(\n      response => response.json()\n    );\n  }\n\n  getAlbumTracks(albumId) {\n    return fetch(\n      `https://platzi-music-api.herokuapp.com/albums/${albumId}/tracks?country=CO`\n    ).then(response => response.json());\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}